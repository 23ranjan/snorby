<%= title "User Settings".html_safe -%>

<div id='settings' class='grid_12 boxit page'>
	
	<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put, :multipart => true, :class => 'validate' }) do |f| %>
	  <%= devise_error_messages! %>

		<p>
			<div class='user-show-avatar'>
				<%= image_tag(@user.avatar.url(:small), :class => 'avatar') %>
				<%= f.label :avatar %><br />
				<%= f.file_field :avatar %><br />
			</div>
		</p>

		<br />
		
		<p><%= f.label :name %><br />
	  <%= f.text_field :name, :placeholder => 'Full Name...', :class => 'required' %></p>

	  <p><%= f.label :email %><br />
	  <%= f.text_field :email, :placeholder => 'E-mail Address...', :class => 'required email' %></p>

	  <p><%= f.label :password %> <i>(leave blank if you don't want to change it)</i><br />
	  <%= f.password_field :password, :placeholder => 'Password...' %></p>

	  <p><%= f.label :password_confirmation %><br />
	  <%= f.password_field :password_confirmation, :placeholder => 'Password Confirmation...' %></p>

	  <p><%= f.label :current_password %> <i>(we need your current password to confirm your changes)</i><br />
	  <%= f.password_field :current_password, :placeholder => 'Current Password...', :class => 'required password' %></p>

	  <p>
			<%= f.label 'Time Zone' %> <i>(please select your preferred timezone)</i><br />
	  	<%= time_zone_select( "user", 'timezone', ActiveSupport::TimeZone.us_zones, :default => "UTC") %><br />
			<br />
		</p>

		<p>
			<%= f.label "Items Per Page:" %> <%= f.select :per_page_count, %w[25 45 65 100], { :include_blank => false } %><br />
			<i>(items to list per page load)</i><br />
			<br />
		</p>

		<% if current_user.admin? %>

			<p><%= f.label :admin %> <%= f.check_box :admin %></p>

		<% end %>

		<%= form_actions do %>

			<%= button "Update Settings", :class => 'success' %>

			<%= button "Cancel", :class => 'warning cancel' %>

		<% end %>

	<% end %>
	
</div>
